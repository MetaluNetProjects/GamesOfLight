#N canvas 126 19 656 978 12;
#X declare -path Fraise -path moonlib -path stuff/AutoPreset -path stuff;
#X declare -path iemlib -lib iemlib -path zexy -lib zexy;
#X obj 10 9 pied/pied 1;
#X obj 168 36 send_OSC \$0;
#X obj 9 87 dynamo 1;
#X obj 9 160 dynamo 2;
#X obj 9 233 dynamo 3;
#X obj 9 306 dynamo 4;
#X obj 9 380 dynamo 5;
#X obj 9 453 dynamo 6;
#X obj 9 526 dynamo 7;
#X obj 9 599 dynamo 8;
#X obj 9 672 dynamo 9;
#X obj 259 38 hsl 170 20 0.01 1 1 0 dynamos-speed-gain-snd dynamos-speed-gain-rcv dynamos-speed-gain -2 -10 0 12 #c6ffc7 #000000 #000000 0 1;
#X obj 434 38 nbx 5 20 -1e+37 1e+37 0 0 dynamos-speed-gain-snd dynamos-speed-gain-rcv empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#N canvas 694 55 914 665 guts 0;
#X obj 64 42 loadbang;
#X obj 64 67 metro 1000;
#X obj 35 41 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 64 91 1 10 4;
#X obj 64 116 s to_dynamos_fruit;
#X text 113 92 flash time duty;
#X obj 382 60 s dynamos-fruit-enable;
#X obj 382 36 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 68 205 r dynamos;
#X obj 68 230 route pos speed, f 37;
#X obj 68 255 route 9;
#X obj 196 256 route 9;
#X obj 68 280 list prepend 1;
#X obj 196 281 list prepend 1;
#X obj 68 307 list prepend pos;
#X obj 196 306 list prepend speed;
#X obj 68 332 list trim;
#X obj 68 357 s dynamos;
#X obj 383 89 r dynamos;
#X obj 383 141 print;
#X obj 383 115 spigot;
#X obj 435 115 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 218 189 + 1;
#X obj 271 577 bng 20 250 50 0 empty empty save 0 -10 0 12 #ff0400 #000000 #000000;
#X obj 64 577 bng 20 250 50 0 empty empty load 0 -10 0 12 #00ff04 #000000 #000000;
#X msg 389 290 set \$1;
#X obj 345 559 b;
#X obj 345 584 del 1000;
#X obj 345 609 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 66 491 apmaster dynconfig;
#X obj 345 534 r dynconfig-sndap;
#X obj 64 601 apmasterfile dynconfig config.txt;
#X obj 112 549 loadbang;
#X obj 112 574 del 100;
#X obj 235 493 del 100;
#X msg 235 518 stop;
#X obj 218 164 r dynamo9-assign-snd;
#X obj 389 211 r dynamos-speed-gain-snd;
#X obj 389 236 s dynamos-speed-gain;
#X obj 389 265 r dynamos-speed-gain;
#X obj 389 315 s dynamos-speed-gain-rcv;
#X obj 389 350 apf dynconfig dynamos-speed-gain dynamos-speed-gain 2, f 55;
#X obj 639 91 netreceive -b -u 9000;
#X obj 639 116 oscparse;
#X obj 639 141 s dynamos-from-OSC;
#X obj 570 28 bng 20 250 50 0 RELOAD_ALL RELOAD_ALL RELOAD_ALL 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 241 78 \; pd dsp 1;
#X obj 389 402 apf dynconfig boule-force-forward dynamo-boule-force-forward 2, f 63;
#X obj 389 376 apf dynconfig dynamo9-assign dynamo9-assign 2;
#X obj 389 427 apf dynconfig manivelle-force-forward dynamo-manivelle-force-forward 2, f 71;
#X obj 64 526 r RELOAD_ALL;
#X obj 9 7 declare -path Fraise -path moonlib -path stuff/AutoPreset -path stuff, f 70;
#X obj 639 189 r dynamos-from-OSC;
#X obj 639 214 route audioOn;
#X obj 639 239 s dynamos-audioOn;
#X connect 0 0 1 0;
#X connect 0 0 46 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 15 0;
#X connect 14 0 16 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 18 0 20 0;
#X connect 20 0 19 0;
#X connect 21 0 20 1;
#X connect 22 0 12 1;
#X connect 22 0 13 1;
#X connect 23 0 31 1;
#X connect 24 0 31 0;
#X connect 24 0 34 0;
#X connect 25 0 40 0;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 23 0;
#X connect 30 0 26 0;
#X connect 32 0 33 0;
#X connect 33 0 24 0;
#X connect 34 0 35 0;
#X connect 35 0 27 0;
#X connect 36 0 22 0;
#X connect 37 0 38 0;
#X connect 39 0 25 0;
#X connect 42 0 43 0;
#X connect 43 0 44 0;
#X connect 50 0 24 0;
#X connect 52 0 53 0;
#X connect 53 0 54 0;
#X restore 168 8 pd guts;
#X obj 164 672 cnv 20 200 70 empty empty Dynamo9\ assign 20 12 0 12 #e0e0e0 #404040 0;
#X obj 176 716 hradio 21 1 0 8 dynamo9-assign-snd dynamo9-assign-rcv 1__2__3__4__5__6__7__8 5 -10 0 12 #feffc6 #000000 #000000 0;
#X obj 164 87 dynamaudio 1;
#X obj 164 160 dynamaudio 2;
#X obj 164 233 dynamaudio 3;
#X obj 164 306 dynamaudio 4;
#X obj 164 380 dynamaudio 5;
#X obj 164 453 dynamaudio 6;
#X obj 164 526 dynamaudio 7;
#X obj 164 599 dynamaudio 8;
#X obj 513 37 bng 20 250 50 0 RELOAD_ALL RELOAD_ALL RELOAD_ALL 0 -10 0 12 #fcfcfc #000000 #000000;
#N canvas 115 316 508 325 audio_master 0;
#X obj 21 25 declare -path iemlib -lib iemlib -path zexy -lib zexy;
#X obj 20 59 clone -s 1 outchan 10;
#X obj 166 134 vsl 20 120 0 1.5 0 0 dynamo-Master-snd dynamo-Master-rcv empty 0 -9 0 12 #ff0400 #000000 #000000 0 1;
#X obj 25 135 vu 10 120 dynout1_vu 1 -1 -10 0 12 #404040 #000000 0 0;
#X obj 39 135 vu 10 120 dynout2_vu 2 -1 -10 0 12 #404040 #000000 0 0;
#X obj 53 135 vu 10 120 dynout3_vu 3 -1 -10 0 12 #404040 #000000 0 0;
#X obj 67 135 vu 10 120 dynout4_vu 4 -1 -10 0 12 #404040 #000000 0 0;
#X obj 81 135 vu 10 120 dynout5_vu 5 -1 -10 0 12 #404040 #000000 0 0;
#X obj 95 135 vu 10 120 dynout6_vu 6 -1 -10 0 12 #404040 #000000 0 0;
#X obj 109 135 vu 10 120 dynout7_vu 7 -1 -10 0 12 #404040 #000000 0 0;
#X obj 123 135 vu 10 120 dynout8_vu 8 -1 -10 0 12 #404040 #000000 0 0;
#X obj 137 135 vu 10 120 dynout9_vu 9 -1 -10 0 12 #404040 #000000 0 0;
#X obj 151 135 vu 10 120 dynout10_vu 10 -1 -10 0 12 #404040 #000000 0 0;
#X obj 182 60 apf dynconfig dynamo-Master dynamo-Master 2;
#X obj 274 229 s dynamos-audioOn-line;
#X obj 274 154 change;
#X obj 274 204 line;
#X obj 274 128 r dynamos-audioOn;
#X msg 274 179 \$1 1000;
#X connect 15 0 18 0;
#X connect 16 0 14 0;
#X connect 17 0 15 0;
#X connect 18 0 16 0;
#X coords 0 -1 1 1 170 160 1 20 100;
#X restore 9 756 pd audio_master;
#X obj 199 769 tgl 20 0 dynamo-manivelle-force-forward-snd dynamo-manivelle-force-forward-rcv manivelle-force-forward 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 382 770 tgl 20 0 dynamo-boule-force-forward-snd dynamo-boule-force-forward-rcv boule-force-forward 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 580 54 1115 771 main-bus 0;
#X obj 484 722 s~ dynambiance;
#X obj 31 256 catch~ dynmainL;
#X obj 232 257 catch~ dynmainR;
#X obj 32 392 *~;
#X obj 233 394 *~;
#X obj 170 218 lop~ 10;
#X obj 170 152 r dynamos-mainvol-snd;
#X obj 29 52 hsl 120 20 0 1 0 0 dynamos-mainvol-snd dynamos-mainvol-rcv dynamos:67 2 10 0 12 #faff00 #9f9f9f #000000 0 1;
#X obj 170 185 pow 2;
#X obj 402 9 apf dynconfig dynamos-mainvol dynamos-mainvol 2;
#X obj 84 80 hradio 15 1 0 10 \$0-mainchanL-snd \$0-mainchanL-rcv mainL:9 -57 7 0 12 #fcfcfc #000000 #000000 0;
#X obj 68 310 + 1;
#X obj 68 287 r \$0-mainchanL-snd;
#X msg 89 340 label mainL:\$1;
#X obj 89 365 s \$0-mainchanL-rcv;
#X obj 266 310 + 1;
#X obj 266 287 r \$0-mainchanR-snd;
#X msg 287 340 label mainR:\$1;
#X obj 287 365 s \$0-mainchanR-rcv;
#X obj 84 98 hradio 15 1 0 10 \$0-mainchanR-snd \$0-mainchanR-rcv mainR:10 -57 7 0 12 #fcfcfc #000000 #000000 0;
#X msg 68 392 set dynout\$1;
#X msg 266 393 set dynout\$1;
#X obj 402 33 apf dynconfig mainchanL \$0-mainchanL 2;
#X obj 402 57 apf dynconfig mainchanR \$0-mainchanR 2;
#X obj 480 258 r dynamos-mainvol-snd;
#X obj 480 283 * 100;
#X obj 480 308 i;
#X obj 480 333 change;
#X obj 480 383 s dynamos-mainvol-rcv;
#X msg 480 358 label dynamos:\$1;
#X obj 646 281 * 100;
#X obj 646 306 i;
#X obj 646 331 change;
#X obj 845 282 * 100;
#X obj 845 307 i;
#X obj 845 332 change;
#X obj 845 257 r ambiance-dynamos-vol-snd;
#X obj 845 382 s ambiance-dynamos-vol-rcv;
#X msg 845 357 label to\\\ dynamos:\$1;
#X obj 646 256 r ambiance-main-vol-snd;
#X obj 646 381 s ambiance-main-vol-rcv;
#X msg 646 356 label to\\\ main:\$1;
#X obj 402 81 apf dynconfig ambiance-main-vol ambiance-main-vol 2;
#X obj 403 104 apf dynconfig ambiance-dynamos-vol ambiance-dynamos-vol 2;
#X obj 242 40 cnv 20 133 75 empty empty ambiance\ mix 20 12 0 12 #e0e0e0 #404040 0;
#X obj 249 88 hsl 120 20 0 1 0 0 ambiance-dynamos-vol-snd ambiance-dynamos-vol-rcv to\ dynamos:0 2 10 0 12 #c6ffc7 #9f9f9f #000000 0 1;
#X obj 249 64 hsl 120 20 0 1 0 0 ambiance-main-vol-snd ambiance-main-vol-rcv to\ main:0 2 10 0 12 #c6ffc7 #9f9f9f #000000 0 1;
#X obj 36 480 wavfile \$0 1 ambiance;
#X obj 238 478 loadbang;
#X obj 238 559 tabplay~ \$0-ambiance;
#X obj 375 584 del 1;
#X obj 238 503 del 200;
#X obj 238 528 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 485 696 *~;
#X obj 503 620 r ambiance-dynamos-vol-snd;
#X obj 503 645 pow 2;
#X obj 503 670 lop~ 10;
#X obj 238 697 *~;
#X obj 256 646 pow 2;
#X obj 256 671 lop~ 10;
#X obj 256 620 r ambiance-main-vol-snd;
#X obj 32 429 throw~ dynout9;
#X obj 233 431 throw~ dynout10;
#X obj 237 723 throw~ dynmainL;
#X obj 352 723 throw~ dynmainR;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 61 0;
#X connect 4 0 62 0;
#X connect 5 0 3 1;
#X connect 5 0 4 1;
#X connect 6 0 8 0;
#X connect 8 0 5 0;
#X connect 11 0 13 0;
#X connect 11 0 20 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 15 0 17 0;
#X connect 15 0 21 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 20 0 61 0;
#X connect 21 0 62 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 29 0;
#X connect 29 0 28 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 41 0;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 35 0 38 0;
#X connect 36 0 33 0;
#X connect 38 0 37 0;
#X connect 39 0 30 0;
#X connect 41 0 40 0;
#X connect 48 0 51 0;
#X connect 49 0 53 0;
#X connect 49 0 57 0;
#X connect 49 1 50 0;
#X connect 50 0 52 0;
#X connect 51 0 52 0;
#X connect 52 0 49 0;
#X connect 53 0 0 0;
#X connect 54 0 55 0;
#X connect 55 0 56 0;
#X connect 56 0 53 1;
#X connect 57 0 63 0;
#X connect 57 0 64 0;
#X connect 58 0 59 0;
#X connect 59 0 57 1;
#X connect 60 0 58 0;
#X coords 0 -1 1 1 360 100 1 20 20;
#X restore 186 816 pd main-bus;
#N canvas 116 94 849 687 wavsdir 0;
#X obj 23 38 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 23 117 symbol;
#X listbox 50 212 83 0 0 0 - - - 0;
#X obj 23 145 openpanel 1;
#X obj 23 178 symbol;
#X obj 110 144 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 23 239 make_relative_path;
#X listbox 44 273 82 0 0 0 - - - 0;
#X obj 23 571 file normalize;
#X listbox 53 599 83 0 0 0 - - - 0;
#X obj 104 495 file patchpath;
#X obj 104 445 loadbang;
#X msg 104 470 0;
#X obj 23 520 list prepend;
#X msg 23 545 symbol \$1/\$2;
#X obj 227 77 apsym dynconfig wavdirs dynamo-wavdirs 2;
#X listbox 226 104 99 0 0 3 - dynamo-wavdirs-rcv dynamo-wavdirs-snd 10;
#X obj 23 297 s dynamo-wavdirs-rcv;
#X obj 23 335 r dynamo-wavdirs-snd;
#X obj 23 631 s dynamos-wavsdir;
#X obj 46 38 cnv 20 600 20 empty dynamos-wavdirs-can ./wavs 5 12 0 10 #c6feff #404040 0;
#X obj 233 400 s dynamos-wavdirs-can;
#X msg 233 374 label \$1;
#X obj 62 91 r dynamos-wavsdir;
#X obj 118 393 file isabsolute;
#X obj 23 367 t s s, f 14;
#X obj 23 418 list prepend 0;
#X obj 23 443 route 0 1;
#X obj 53 471 symbol;
#X obj 23 66 del 100;
#X connect 0 0 29 0;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 6 0 17 0;
#X connect 8 0 9 0;
#X connect 8 0 19 0;
#X connect 10 0 13 1;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 8 0;
#X connect 18 0 22 0;
#X connect 18 0 25 0;
#X connect 22 0 21 0;
#X connect 23 0 1 1;
#X connect 24 0 26 1;
#X connect 25 0 26 0;
#X connect 25 1 24 0;
#X connect 26 0 27 0;
#X connect 27 0 13 0;
#X connect 27 1 28 0;
#X connect 28 0 8 0;
#X connect 29 0 1 0;
#X coords 0 -1 1 1 630 40 1 20 20;
#X restore 9 922 pd wavsdir;
#N canvas 787 21 803 981 DOC 0;
#X text 61 63 Le paramètre "dynamos-speed-gain" permet de régler la sensibilité des capteurs. Le régler de façon à ce que la vitesse renvoyée ("speed") soit d'environ 500 quand on fait tourner la manivelle rapidement., f 89;
#X text 29 198 Réglages audio par Dynamo :;
#X text 65 219 Chaque canal "dynamaudio" peut être assigné à un canal de sortie audio \, entre 1 et 10 \, à un volume réglable., f 88;
#X text 66 256 De plus \, son signal est envoyé dans les sortie mainL et mainR \, avec une panoramique réglable., f 88;
#X text 28 42 Sensibilité des capteurs :;
#X text 61 115 La valeur de "speed" est ensuite envoyée comme affichée vers l'OSC. On peut tester l'envoi OSC en manipulant les affichages "speed" de bas en haut., f 89;
#X text 111 739 Exemple: si "wavsdir" est positionné sur "./wavs" \, le "dynamaudio 5" ira chercher le son de boule dans le fichier "./wavs/boule/5.wav". Si le fichier n'existe pas \, il choisira "./wavs/boule/default.wav"., f 83;
#X text 110 673 Chaque "dynamoaudio" va charger chaque fichier audio depuis le sous-dossier de "wavsdir" correspondant. Par exemple le fichier audio de la "manivelle" sera cherché dans "[wavsdir]/manivelle". Si un fichier "[NUM_DYNAMO].wav" existe il sera choisi \, sinon ce sera le fichier "default.wav"., f 83;
#X text 112 791 Les fichiers audio doivent être impérativement au format wav., f 83;
#X text 112 838 Chaque fichier audio de type "vidange" doit être accompagné d'un fichier texte du même nom (par exemple vidange/default.wav est accompagné de vidange/default.txt \, de même que vidange/1.wav doit venir avec vidange/1.wav). Ce fichier ne comporte qu'une seule ligne \, composée de 2 nombre séparés d'un espace. Ces nombres représentent en secondes la "fin du début" et le "début de la fin"., f 83;
#X text 112 924 Structure typique d'un son de vidange:;
#X text 344 958 ^;
#X text 344 962 |;
#X text 312 977 fin du début;
#X text 525 956 ^;
#X text 525 960 |;
#X text 141 942 [déclenchement de la vidange] [écoulement \, sera bouclé] [fin écoulement \, bruits de syphon], f 90;
#X text 488 976 début de la fin;
#X text 107 449 Le son de "boule" est joué en boucle quand on tourne la manivelle et que la "phase" est supérieure à 1 La vitesse de lecture dépend de la vitesse de la manivelle \, multipliée par un facteur allant de 0 à 1 quand la phase passe de 1 à 2 (ce facteur vaut 1 quand la phase est supérieure à 2). Quand la manivelle tourne "à l'envers" \, le son est joué à l'envers \, sauf si l'option "boule-force-forward" est activée., f 83;
#X text 107 382 Le son de "manivelle" est joué en boucle quand on tourne la manivelle. La vitesse de lecture dépend de la vitesse de la manivelle. Quand la manivelle tourne "à l'envers" \, le son est joué à l'envers \, sauf si l'option "manivelle-force-forward" est activée., f 83;
#X text 108 536 Le son de "vidange" est joué quand la phase décroit. Le son est joué depuis le début quand la phase commence à décroitre en dessous de 2.5 \, puis le son est bouclé entre ses 2 marqueurs tant que la phase continue de décroitre et reste au dessus de 0.5 \, puis la fin du son (du 2e marqueur à la fin) est joué. Le son de vidange s'arrète si la phase recommence à augmenter. Remarque: toutes les transitions sont lissées sur 1 seconde (le son "vidange" n'a pas besoin de contenir des raccords "propres"), f 83;
#X text 66 295 Le son produit par un "dynamaudio" dépend du "speed" du "dynamo" correspondant ainsi que de la "phase" reçue par l'OSC (port 9000). Ces deux paramètres peuvent être actionnés manuellement pour tester., f 88;
#X text 65 1026 Le main-bus est la sortie stéréo d'ambiance. Elle peut diffuser les sons de l'ensemble des "dynamaudio"s ainsi que le son "ambiance" joué en boucle., f 88;
#X text 64 1066 Les 2 canaux de sortie du main-bus sont réglables chacun entre 1 et 10, f 88;
#X text 64 1090 Le réglage "dynamos" (en jaune) permet de régler le volume du mélange de l'ensemble des dynamos dans la sortie main-bus., f 88;
#X text 64 1130 Le son d'ambiance est chargé depuis le fichier "[wavsdir]/ambiance/1.wav" si il existe \, "[wavsdir]/ambiance/default.wav" dans le cas contraire. Il est joué en boucle et diffusé dans le main-bus (volume réglé par le fader vert "to main") et dans toutes les sorties des dynamaudio (volume réglé par le fader vert "to dynamos")., f 88;
#X text 67 1242 Le patch est livré avec un set minimal de sons \, pour ne pas surcharger le dépot Git \, mais afin de permettre un test immédiat. Le bouton "wavsdir" permet de repositionner le dossier des sons ailleurs dans le système \, sans avoir à modifier l'arborescence du projet lui-même. Dans la mesure du possible \, le chemin du dossier sera stocké de façon relative au dossier du projet., f 87;
#X text 67 1361 Tous les réglages sont automatiquement sauvegardés \, 1 seconde après chaque modification \, dans le fichier "config.txt"., f 87;
#X text 143 8 Dynamos - documentation (french);
#X text 67 358 Trois sons différents sont joués :;
#X text 71 651 Choix des fichiers audio :;
#X text 77 820 Fichiers marqueurs (uniquement pour vidange) :;
#X text 29 1005 Main bus :;
#X text 34 1220 Wavsdir :;
#X text 34 1339 Fichier "config.txt" :;
#X text 29 201 _________________________;
#X text 34 1223 _______;
#X text 28 1008 ________;
#X text 35 1342 ____________________;
#X text 27 45 ________________________;
#X text 33 1439 ____________________________________________________________________________________________, f 93;
#X text 60 152 La dynamo "9" est un capteur de secours. Elle peut être assignée à n'importe quel identifiant (de 1 à 8) grâce au sélecteur "Dynamo9 assign"., f 89;
#X restore 519 128 pd DOC;
#X obj 518 226 tgl 50 0 dynamos-audioOn dynamos-audioOn AudioOn 0 -10 0 12 #00ff04 #000000 #000000 0 1;
